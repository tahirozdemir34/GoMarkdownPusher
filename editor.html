<!DOCTYPE html>
<html>
	<head>
    
		<style>
			html, body, #editor {
			  margin: 0;
			  height: 100%;
			  font-family: 'Helvetica Neue', Arial, sans-serif;
			  color: #333;
			}

			textarea, #editor div {
			  display: inline-block;
			  width: 49%;
			  height: 100%;
			  vertical-align: top;
			  box-sizing: border-box;
			  padding: 0 20px;
			}

			textarea {
			  border: none;
			  border-right: 1px solid #ccc;
			  resize: none;
			  outline: none;
			  background-color: #f6f6f6;
			  font-size: 14px;
			  font-family: 'Monaco', courier, monospace;
			  padding: 20px;
			}

			code {
			  color: #f66;
			}
		</style>
		<script src="https://unpkg.com/marked@0.3.6"></script>
		<script src="https://unpkg.com/lodash@4.16.0"></script>
		<script type="text/javascript" src="https://unpkg.com/vue@latest/dist/vue.js"></script>
        <link type="text/css" rel="stylesheet" href="//unpkg.com/bootstrap/dist/css/bootstrap.min.css" />
<link
  type="text/css"
  rel="stylesheet"
  href="//unpkg.com/bootstrap-vue@latest/dist/bootstrap-vue.min.css"
/>

<script src="//unpkg.com/@babel/polyfill@latest/dist/polyfill.min.js"></script>
<script src="//unpkg.com/bootstrap-vue@latest/dist/bootstrap-vue.min.js"></script>

        
		<script type="text/javascript">
			window.onload=function(){
			  
				new Vue({
				  el: '#editor',
				  data: {
					input: '# hello'
				  },
				  computed: {
					compiledMarkdown: function () {
					  return marked(this.input, { sanitize: true })
					}
				  },
				  methods: {
					update: _.debounce(function (e) {
					  this.input = e.target.value
					}, 300)
				  }
				})
			}
    </script>
    <script>
      function doFunction(){
        var xhr = new XMLHttpRequest();
        xhr.open("POST", "http://127.0.0.1:8000", true);
        xhr.setRequestHeader('Content-Type', 'application/json');
        xhr.send(JSON.stringify({
            text: document.getElementById("markdown").value
        }));
      }
    </script>
	</head>

	<body>
    	<div>
        <button type="button" class="btn btn-primary btn-lg" onclick="doFunction();">Save</button>
        </div>
		<div id="editor">
		  <textarea id="markdown" :value="input" @input="update"></textarea>
		  <div v-html="compiledMarkdown"></div>
		</div>
	</body>
</html>
